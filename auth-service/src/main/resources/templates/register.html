<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>CloudCrush | Register</title>
</head>
<body style="margin:0; padding:0; font-family:'Segoe UI',sans-serif; background:linear-gradient(135deg,#a8edea,#fed6e3); height:100vh; display:flex; align-items:center; justify-content:center;">

<div style="background:white; width:400px; border-radius:15px; padding:30px; box-shadow:0 4px 20px rgba(0,0,0,0.2); text-align:center;">
    <h1 style="font-size:24px; font-weight:bold; color:#FF6F61; margin-bottom:5px;">‚òÅÔ∏è CLOUDCRUSH</h1>
    <p style="margin:0; font-size:13px; color:#555;">_Your personal alternative to Google Drive_</p>
    <p style="margin:0; font-size:12px; color:#777;">Because documents and memories both are important</p>
    <p style="font-size:11px; color:#999; margin-top:5px;">Founded by <strong>Nandini Sharma</strong></p>
    <hr style="margin:15px 0; border:none; height:1px; background:#eee;">

    <form id="registerForm">
        <input type="text" id="fullName" placeholder="Full Name" required
               style="width:90%; padding:10px; margin:8px 0; border:1px solid #ccc; border-radius:8px;"><br>
        <input type="email" id="email" placeholder="Email" required
               style="width:90%; padding:10px; margin:8px 0; border:1px solid #ccc; border-radius:8px;"><br>
        <input type="password" id="password" placeholder="Password" required
               style="width:90%; padding:10px; margin:8px 0; border:1px solid #ccc; border-radius:8px;"><br>
        <button type="submit"
                style="background:#FF6F61; color:white; border:none; padding:10px 25px; border-radius:8px; cursor:pointer; margin-top:10px; width:95%;">Register</button>
    </form>

    <p id="registerMessage" style="color:red; font-size:13px; margin-top:10px;"></p>

    <p style="font-size:14px; margin-top:20px;">Already have an account?
        <a th:href="@{/login}" style="color:#FF6F61; text-decoration:none;">Login</a>
    </p>
</div>

<script>
    document.addEventListener("DOMContentLoaded", () => {
      const form = document.getElementById("registerForm");
      form.addEventListener("submit", async (e) => {
        e.preventDefault();
        const fullName = document.getElementById("fullName").value;
        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;

        try {
          const res = await fetch("/api/auth/register", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ fullName, email, password })
          });

          if (!res.ok) throw new Error("Failed");
          alert("Registration successful üéâ");
          window.location.href = "/login";
        } catch {
          document.getElementById("registerMessage").textContent = "User already exists or error!";
        }
      });
    });
</script>
</body>
</html>
